{% extends "base.html" %}
{% block title %}Profile - Let Me Cook{% endblock %}
{% block content %}
    <div class="max-w-md mx-auto mt-12 p-6 bg-white rounded shadow">
        <div class="text-center mb-4">
            <img src="{{ user.profile_picture }}"
                 alt="{{ user.username }}"
                 class="h-32 w-32 object-cover rounded-full mx-auto">
        </div>
        <h2 class="text-2xl font-bold mb-6 text-center">My Profile</h2>
        <p class="mb-4">
            <strong>Username:</strong> {{ user.username }}
        </p>
        <div class="flex justify-around">
            <a href="/profile/edit"
               class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Edit Profile</a>
            <button id="deleteProfileBtn"
                    class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Delete Profile</button>
        </div>
    </div>
    <!-- Delete confirmation modal -->
    <div id="deleteModal"
         class="fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg p-6 max-w-md mx-4">
            <h3 class="text-xl font-bold mb-4">Confirm Profile Deletion</h3>
            <p class="mb-6 text-gray-700">
                Are you sure you want to delete your profile? This action cannot be undone and all your recipes and data will be permanently lost.
            </p>
            <div class="flex justify-end space-x-4">
                <button id="cancelDeleteBtn"
                        class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300">Cancel</button>
                <a href="/profile/delete"
                   class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Delete</a>
            </div>
        </div>
    </div>
    <script>
    // Get modal elements
    const deleteModal = document.getElementById('deleteModal');
    const deleteProfileBtn = document.getElementById('deleteProfileBtn');
    const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');

    // Show modal when delete button is clicked
    deleteProfileBtn.addEventListener('click', function() {
      deleteModal.classList.remove('hidden');
    });

    // Hide modal when cancel button is clicked
    cancelDeleteBtn.addEventListener('click', function() {
      deleteModal.classList.add('hidden');
    });

    // Also hide modal when clicking outside of it
    deleteModal.addEventListener('click', function(event) {
      if (event.target === deleteModal) {
        deleteModal.classList.add('hidden');
      }
    });
    </script>
{% endblock %}
